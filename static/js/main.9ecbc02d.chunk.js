(this["webpackJsonpmovie-search"]=this["webpackJsonpmovie-search"]||[]).push([[0],{36:function(e,t,c){},37:function(e,t,c){},38:function(e,t,c){},39:function(e,t,c){},41:function(e,t,c){},42:function(e,t,c){},43:function(e,t,c){},50:function(e,t,c){},51:function(e,t,c){"use strict";c.r(t);var i=c(1),r=c.n(i),n=c(19),a=c.n(n),s=(c(36),c(9)),o=(c(37),c(38),c(31)),b=(c(39),c(14)),j=c(52),d=c(2),l=function(e){var t=e.poster,c=Object(i.useState)(!1),r=Object(s.a)(c,2),n=r[0],a=r[1],l=Object(j.a)(["favorites"]),u=Object(s.a)(l,2),f=u[0],v=u[1];return Object(i.useEffect)((function(){f.favorites&&f.favorites.map((function(e){return t.imdbID===e.imdbID&&a(!0)}))}),[]),Object(d.jsx)("div",{className:"MoviePoster",children:Object(d.jsxs)("fieldset",{className:"MoviePoster-container",children:[Object(d.jsx)("legend",{children:t.Title}),Object(d.jsx)("img",{className:"MoviePoster-img",alt:"poster",src:t.Poster}),Object(d.jsxs)("div",{className:"MoviePoster-info",children:[Object(d.jsx)("div",{children:"year: ".concat(t.Year)}),Object(d.jsx)("div",{children:"type: ".concat(t.Type)}),Object(d.jsx)("div",{children:"imdbID: ".concat(t.imdbID)}),Object(d.jsx)("div",{className:"MoviePoster-favorite",onClick:function(){return n?v("favorites",f.favorites.filter((function(e){return t.imdbID!==e.imdbID})),{path:"/"}):f.favorites?v("favorites",[].concat(Object(o.a)(f.favorites),[{imdbID:t.imdbID,rate:0,watched:!1}]),{path:"/"}):v("favorites",[{imdbID:t.imdbID,rate:0,watched:!1}],{path:"/"}),void a(!n)},children:n?Object(d.jsx)(b.a,{size:"100px",color:"red"}):Object(d.jsx)(b.c,{size:"100px"})})]})]})})},u=(c(41),c(42),c(16)),f=function(e){var t=e.favorite,c=e.watched,i=e.setSelectedMovie;return Object(d.jsx)("div",{className:"MovieFavorite",onClick:function(){return i(t)},children:Object(d.jsxs)("fieldset",{className:"MovieFavorite-container",children:[Object(d.jsx)("legend",{children:t.Title}),Object(d.jsx)("img",{alt:"poster",src:t.Poster}),c&&Object(d.jsx)(u.a,{className:"MovieFavorite-watched",size:"70px"})]})})},v=(c(43),function(e){var t=e.imdbID,c=e.rate,i=Object(j.a)(["favorites"]),r=Object(s.a)(i,2),n=r[0],a=r[1];return Object(d.jsx)("div",{className:"StarVoter",children:function(e){return new Array(5).fill(!0,0,e).fill(!1,e,5)}(c).map((function(e,c){return Object(d.jsx)("div",{className:"StarVoter-star",onClick:function(){n.favorites.forEach((function(e,i){if(e.imdbID===t){var r=n.favorites;r[i]={imdbID:e.imdbID,rate:c+1,watched:r[i].watched},a("favorites",r,{path:"/"})}}))},children:e?Object(d.jsx)(b.b,{size:"10vh",color:"yellow"}):Object(d.jsx)(b.d,{size:"10vh"})},c)}))})}),h=c(22),O=c(10),m=function(e){return e?{type:"START_LOADING"}:{type:"STOP_LOADING"}},p=c(12),x=c(18),I=c.n(x),D=c(26),y=function(){var e=Object(D.a)(I.a.mark((function e(t){var c;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("http://www.omdbapi.com/?s=".concat(t,"&apikey=83b9aeb1"));case 2:return c=e.sent,e.abrupt("return",c.json());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),N=function(){var e=Object(D.a)(I.a.mark((function e(t){var c;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("http://www.omdbapi.com/?i=".concat(t,"&apikey=83b9aeb1"));case 2:return c=e.sent,e.abrupt("return",c.json());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),w=function(e){var t,c,r=e.backRefresh,n=Object(i.useState)(),a=Object(s.a)(n,2),o=a[0],b=a[1],l=Object(i.useState)(),x=Object(s.a)(l,2),I=x[0],D=x[1],y=Object(j.a)(["favorites"]),w=Object(s.a)(y,2),g=w[0],M=w[1],L=Object(O.b)();return Object(i.useEffect)((function(){!function(){L(m(!0));var e=[];g.favorites&&g.favorites.forEach((function(t){N(t.imdbID).then((function(t){e.push(t),e.length>=g.favorites.length&&D(e),e.length>0&&b(e[0])})).catch((function(e){return console.log(e.message)}))})),setTimeout((function(){return L(m(!1))}),500)}()}),[]),Object(d.jsxs)("div",{className:"MovieLibrary",children:[Object(d.jsx)(p.b,{to:"/",onClick:function(){return r()},children:Object(d.jsx)(h.a,{className:"MovieLibrary-back",size:"60px"})}),Object(d.jsx)("div",{className:"MovieLibrary-header"}),o&&Object(d.jsxs)("div",{className:"MovieLibrary-body",children:[Object(d.jsxs)("div",{className:"MovieLibrary-body-top",children:[Object(d.jsx)("img",{className:"MovieLibrary-img",alt:"poster",src:o.Poster}),Object(d.jsxs)("div",{className:"MovieLibrary-controlers",children:[Object(d.jsx)(u.a,{className:"MovieLibrary-watched",size:"10vh",onClick:function(){g.favorites.forEach((function(e,t){if(e.imdbID===o.imdbID){var c=g.favorites;c[t]={imdbID:e.imdbID,rate:c[t].rate,watched:!c[t].watched},M("favorites",c,{path:"/"})}}))},style:{color:(null===(t=g.favorites.find((function(e){return e.imdbID===o.imdbID})))||void 0===t?void 0:t.watched)?"green":"white"}}),Object(d.jsx)(u.b,{className:"MovieLibrary-delete",size:"10vh",onClick:function(){return e=o.imdbID,M("favorites",g.favorites.filter((function(t){return t.imdbID!==e})),{path:"/"}),D(I.filter((function(t){return t.imdbID!==e}))),void(I[1]?b(I[1]):b());var e}})]})]}),Object(d.jsx)(v,{imdbID:o.imdbID,rate:null===(c=g.favorites.find((function(e){return e.imdbID===o.imdbID})))||void 0===c?void 0:c.rate})]}),o&&Object(d.jsxs)("div",{className:"MovieLibrary-info",children:[Object(d.jsx)("p",{children:"Score: ".concat(o.Ratings[0]&&o.Ratings[0].Value," / 100")}),Object(d.jsx)("p",{children:"Year: ".concat(o.Year)}),Object(d.jsx)("p",{children:"Genre: ".concat(o.Genre)}),Object(d.jsx)("p",{children:"Runtime: ".concat(o.Runtime)}),Object(d.jsx)("p",{children:"Writer: ".concat(o.Writer)}),Object(d.jsx)("p",{children:"Actors: ".concat(o.Actors)}),Object(d.jsx)("p",{children:"Plot: ".concat(o.Plot)})]}),I&&Object(d.jsx)("div",{className:"MovieLibrary-container",children:I.map((function(e){return Object(d.jsx)(f,{favorite:e,watched:g.favorites.find((function(t){return t.imdbID===e.imdbID})).watched,setSelectedMovie:b},e.imdbID)}))})]})},g=c(4);var M=function(){var e=Object(i.useState)(""),t=Object(s.a)(e,2),c=t[0],r=t[1],n=Object(i.useState)([]),a=Object(s.a)(n,2),o=a[0],b=a[1],j=Object(O.b)(),u=function(){j(m(!0)),b([]),y(c).then((function(e){b(e.Search),setTimeout((function(){return j(m(!1))}),500)})).catch((function(e){console.log(e.message),setTimeout((function(){return j(m(!1))}),500)}))};return Object(d.jsxs)("div",{className:"App",children:[Object(d.jsx)("div",{className:"App-header"}),Object(d.jsx)(p.b,{to:"/library/",children:Object(d.jsx)(h.b,{className:"App-library",size:"60px"})}),Object(d.jsxs)("div",{className:"App-search",children:[Object(d.jsx)("input",{type:"text",placeholder:"Enter movie's title",value:c,onChange:function(e){return r(e.target.value)}}),Object(d.jsx)("button",{onClick:function(){return u()},children:"search"})]}),o&&Object(d.jsx)("div",{className:"App-posters",children:o.map((function(e){return Object(d.jsx)(l,{poster:e},e.imdbID)}))}),Object(d.jsx)(g.a,{path:"/library/",children:Object(d.jsx)(w,{backRefresh:u})})]})},L=(c(50),c(30)),k=function(){var e=Object(O.c)((function(e){return e.loading}));return Object(d.jsx)("div",{className:"Loading",style:{display:e?"flex":"none"},children:Object(d.jsx)(L.a,{className:"Loading-arrow",size:"150px"})})},S=c(23),A=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"START_LOADING":return!0;case"STOP_LOADING":return!1;default:return e}},P=Object(S.a)({loading:A}),T=Object(S.b)(P);a.a.render(Object(d.jsx)(r.a.StrictMode,{children:Object(d.jsx)(O.a,{store:T,children:Object(d.jsxs)(p.a,{children:[Object(d.jsx)(k,{}),Object(d.jsx)(M,{})]})})}),document.getElementById("root"))}},[[51,1,2]]]);
//# sourceMappingURL=main.9ecbc02d.chunk.js.map